{
  "info": {
    "_postman_id": "21c129c6-30ec-4b79-b089-ecda001e2f0f",
    "name": "TMDT Backend API",
    "description": "Postman collection covering success and failure scenarios for all API endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register Customer - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"customer_{{$randomInt}}@example.com\",\n    \"password\": \"{{customerPassword}}\",\n    \"full_name\": \"Test Customer\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"customerEmail\", response.email);",
                  "pm.collectionVariables.set(\"customerId\", response.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Register Customer - Error 400 Email Exists",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"{{customerEmail}}\",\n    \"password\": \"{{customerPassword}}\",\n    \"full_name\": \"Duplicate Customer\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Register Customer - Error 422 Invalid Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"not-an-email\",\n    \"password\": \"{{customerPassword}}\",\n    \"full_name\": \"Broken Customer\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Register Secondary Customer - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"customer_b_{{$randomInt}}@example.com\",\n    \"password\": \"{{secondCustomerPassword}}\",\n    \"full_name\": \"Second Customer\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"secondCustomerEmail\", response.email);",
                  "pm.collectionVariables.set(\"secondCustomerId\", response.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Customer - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"{{customerEmail}}\",\n    \"password\": \"{{customerPassword}}\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"accessToken\", response.access_token);",
                  "pm.collectionVariables.set(\"refreshToken\", response.refresh_token);"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Customer - Error 401 Wrong Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"{{customerEmail}}\",\n    \"password\": \"wrong-password\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Customer - Error 401 Unknown Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"not_exists@example.com\",\n    \"password\": \"{{customerPassword}}\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Secondary Customer - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"{{secondCustomerEmail}}\",\n    \"password\": \"{{secondCustomerPassword}}\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"secondCustomerAccessToken\", response.access_token);"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "refresh"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"refresh_token\": \"{{refreshToken}}\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"accessToken\", response.access_token);",
                  "pm.collectionVariables.set(\"refreshToken\", response.refresh_token);"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token - Error 400 Invalid Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "refresh"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"refresh_token\": \"totally-invalid\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Admin - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "description": "Provide valid admin credentials via collection variables before running.",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"adminAccessToken\", response.access_token);"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Admin - Error 401 Wrong Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"{{adminEmail}}\",\n    \"password\": \"WrongPassword123!\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Root - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"{{rootEmail}}\",\n    \"password\": \"{{rootPassword}}\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "description": "Provide valid root credentials via collection variables before running.",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"rootAccessToken\", response.access_token);"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Root - Error 401 Wrong Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"email\": \"{{rootEmail}}\",\n    \"password\": \"IncorrectRootPass!\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Google OAuth Login - Success (Requires Config)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/google/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "google",
                "login"
              ]
            }
          },
          "response": [],
          "description": "Returns redirect URL when Google OAuth credentials are configured."
        },
        {
          "name": "Google OAuth Login - Error 500 Not Configured",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/google/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "google",
                "login"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Google OAuth Callback - Success (Requires Config)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/google/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "google",
                "callback"
              ],
              "query": [
                {
                  "key": "code",
                  "value": "valid-code"
                }
              ]
            }
          },
          "response": [],
          "description": "Exchange code for tokens when Google OAuth credentials are configured."
        },
        {
          "name": "Google OAuth Callback - Error 422 Missing Code",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/google/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "google",
                "callback"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Google OAuth Callback - Error 503 Not Configured",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/google/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "google",
                "callback"
              ],
              "query": [
                {
                  "key": "code",
                  "value": "sample-code"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 503\", function () {",
                  "    pm.response.to.have.status(503);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get Current User - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.test(\"Matches logged in user\", function () {",
                  "    pm.expect(response.id).to.eql(Number(pm.collectionVariables.get(\"customerId\")));",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Current User - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Get Current User - Error 401 Invalid Token",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{invalidToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "List Users - Success (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Users - Error 403 Forbidden (Customer)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Users - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Get User Detail - Success (Self)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{customerId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "{{customerId}}"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User Detail - Error 404 Not Found",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "999999"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User Detail - Error 403 Forbidden (Other Customer)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{secondCustomerId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "{{secondCustomerId}}"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update User - Success (Self)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/{{customerId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "{{customerId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"full_name\": \"Customer Updated\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update User - Error 404 Not Found",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "999999"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"full_name\": \"No One\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update User - Error 403 Forbidden (Other Customer)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/{{secondCustomerId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "{{secondCustomerId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"full_name\": \"Illegal Update\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Role - Success (Root)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"qa-role-{{$timestamp}}\",\n    \"description\": \"Role created via tests\",\n    \"is_system\": false\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"createdRoleId\", response.id);"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{rootAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Role - Error 400 Duplicate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"qa-role-duplicate\",\n    \"description\": \"Duplicate role\",\n    \"is_system\": false\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(pm.response.code === 201 || pm.response.code === 400, \"Create or detect duplicate\");",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set(\"duplicateRoleId\", response.id);",
                  "} else {",
                  "    pm.test(\"Status code is 400\", function () {",
                  "        pm.response.to.have.status(400);",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{rootAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Role - Error 403 Forbidden (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"admin-not-allowed\",\n    \"description\": \"Should fail\",\n    \"is_system\": false\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Roles - Success (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Roles - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Create Address - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/me/addresses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me",
                "addresses"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"street\": \"123 Test St\",\n    \"city\": \"HCMC\",\n    \"district\": \"1\",\n    \"ward\": \"Ben Nghe\",\n    \"contact_name\": \"Test Customer\",\n    \"contact_phone\": \"0900000000\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Address - Error 422 Invalid Phone",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/me/addresses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me",
                "addresses"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"street\": \"Bad St\",\n    \"city\": \"HCMC\",\n    \"district\": \"1\",\n    \"ward\": \"Ben Nghe\",\n    \"contact_name\": \"Test Customer\",\n    \"contact_phone\": \"invalid\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Address - Error 401 Missing Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/me/addresses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me",
                "addresses"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"street\": \"No Auth St\",\n    \"city\": \"HCMC\",\n    \"district\": \"1\",\n    \"ward\": \"Ben Nghe\",\n    \"contact_name\": \"Test Customer\",\n    \"contact_phone\": \"0900000000\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        }
      ]
    },
    {
      "name": "Products (Public)",
      "item": [
        {
          "name": "List Products - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Products - Error 422 Invalid Size",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products"
              ],
              "query": [
                {
                  "key": "size",
                  "value": "0"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Product Suggestions - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/suggestions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "suggestions"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "chair"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Product Suggestions - Error 422 Missing Query",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/suggestions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "suggestions"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Product Detail - Error 404 Not Found",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "999999"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Categories - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/categories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "categories"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Categories - Error 405 Method Not Allowed",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/categories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "categories"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 405\", function () {",
                  "    pm.response.to.have.status(405);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Tags - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/tags",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "tags"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Tags - Error 405 Method Not Allowed",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/tags",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "tags"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 405\", function () {",
                  "    pm.response.to.have.status(405);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Products (Admin)",
      "item": [
        {
          "name": "Create Category - Success (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/categories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "categories"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"Category {{$randomInt}}\",\n    \"slug\": \"category-{{$randomInt}}\",\n    \"description\": \"Automation category\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"categoryId\", response.id);"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Category - Error 400 Duplicate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/categories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "categories"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"Duplicate Category\",\n    \"slug\": \"duplicate-category\",\n    \"description\": \"Duplicate check\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(pm.response.code === 201 || pm.response.code === 400, \"Create or detect duplicate category\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Category - Error 422 Missing Fields",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/categories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "categories"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"description\": \"Missing required fields\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Tag - Success (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/tags",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "tags"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"Tag {{$randomInt}}\",\n    \"slug\": \"tag-{{$randomInt}}\",\n    \"description\": \"Automation tag\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"tagId\", response.id);"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Tag - Error 400 Duplicate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/tags",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "tags"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"Duplicate Tag\",\n    \"slug\": \"duplicate-tag\",\n    \"description\": \"Duplicate check\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(pm.response.code === 201 || pm.response.code === 400, \"Create or detect duplicate tag\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Tag - Error 422 Missing Fields",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/tags",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "tags"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"description\": \"Missing required fields\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Product - Success (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"sku\": \"SKU-{{$uuid}}\",\n    \"name\": \"Luxury Chair {{$uuid}}\",\n    \"description\": \"Ergonomic luxury chair\",\n    \"price\": 500000,\n    \"stock_quantity\": 50,\n    \"category_id\": {{categoryId}},\n    \"tag_ids\": [{{tagId}}]\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"productId\", response.id);"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Product - Error 422 Missing Fields",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"Incomplete Product\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Product - Error 401 Unauthorized",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"sku\": \"SKU-NOAUTH\",\n    \"name\": \"Unauthorized Product\",\n    \"price\": 100,\n    \"stock_quantity\": 1\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Create Product For Deletion - Success (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"sku\": \"SKU-DELETE-{{$uuid}}\",\n    \"name\": \"Disposable Product {{$uuid}}\",\n    \"description\": \"Product used for delete tests\",\n    \"price\": 1000,\n    \"stock_quantity\": 5\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"productToDeleteId\", response.id);"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Get Product Detail - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "{{productId}}"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Product - Success",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "{{productId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"price\": 450000,\n    \"stock_quantity\": 40\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Update Product - Error 404 Not Found",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "999999"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"price\": 10\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Update Product - Error 401 Unauthorized",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "{{productId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"price\": 10\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Delete Product - Success",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/{{productToDeleteId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "{{productToDeleteId}}"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Delete Product - Error 404 Not Found",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "999999"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Delete Product - Error 401 Unauthorized",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "products",
                "{{productId}}"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        }
      ]
    },
    {
      "name": "Cart",
      "item": [
        {
          "name": "Add To Cart - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"product_id\": {{productId}},\n    \"quantity\": 2\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"cartItemId\", response.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Add To Cart - Error 404 Product Not Found",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"product_id\": 999999,\n    \"quantity\": 1\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Add To Cart - Error 401 Unauthorized",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"product_id\": {{productId}},\n    \"quantity\": 1\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Get Cart - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Cart - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Update Cart Item - Success",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart/{{cartItemId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart",
                "{{cartItemId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"quantity\": 3\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Cart Item - Error 404 Not Found",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart/0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart",
                "0"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"quantity\": 1\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Cart Item - Error 401 Missing Token",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart/{{cartItemId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart",
                "{{cartItemId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"quantity\": 1\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Remove Cart Item - Success",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cart/{{cartItemId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart",
                "{{cartItemId}}"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Remove Cart Item - Error 404 Not Found",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cart/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart",
                "999999"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Remove Cart Item - Error 401 Missing Token",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cart/{{cartItemId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart",
                "{{cartItemId}}"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Add To Cart For Clear - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"product_id\": {{productId}},\n    \"quantity\": 1\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Clear Cart - Success",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Clear Cart - Error 401 Missing Token",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Prepare Cart For Order - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"product_id\": {{productId}},\n    \"quantity\": 3\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Order - Success (MOMO)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"shipping_address\": \"123 Main St, District 1, HCMC\",\n    \"shipping_contact_name\": \"Test Customer\",\n    \"shipping_contact_phone\": \"0987654321\",\n    \"payment_gateway\": \"momo\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"orderId\", response.order.id);",
                  "if (response.payment && response.payment.payment_id) {",
                  "    pm.collectionVariables.set(\"paymentId\", response.payment.payment_id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Order - Error 400 Cart Empty",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"shipping_address\": \"123 Main St\",\n    \"shipping_contact_name\": \"Test Customer\",\n    \"shipping_contact_phone\": \"0987654321\",\n    \"payment_gateway\": \"cod\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Orders - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Orders - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Get Order Detail - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders",
                "{{orderId}}"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Order Detail - Error 404 Not Found",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders",
                "999999"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Cancelable Order - Success (COD)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cart"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"product_id\": {{productId}},\n    \"quantity\": 1\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Order To Cancel - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"shipping_address\": \"456 Another St\",\n    \"shipping_contact_name\": \"Test Customer\",\n    \"shipping_contact_phone\": \"0977777777\",\n    \"payment_gateway\": \"cod\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"orderIdToCancel\", response.order.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Cancel Order - Success",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderIdToCancel}}/cancel",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders",
                "{{orderIdToCancel}}",
                "cancel"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Cancel Order - Error 400 Already Cancelled",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderIdToCancel}}/cancel",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders",
                "{{orderIdToCancel}}",
                "cancel"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Admin List Orders - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "orders"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Admin List Orders - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "orders"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Admin List Orders - Error 403 Forbidden (Customer)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "orders"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Admin Update Order Status - Success",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/orders/{{orderId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "orders",
                "{{orderId}}",
                "status"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"status\": \"processing\",\n    \"notes\": \"Manually updated during testing\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Admin Update Order Status - Error 404 Not Found",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/orders/999999/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "orders",
                "999999",
                "status"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"status\": \"processing\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Admin Update Order Status - Error 422 Invalid Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/orders/{{orderId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "orders",
                "{{orderId}}",
                "status"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"status\": \"invalid\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "Initiate Payment - Success (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments/initiate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments",
                "initiate"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"order_id\": {{orderId}},\n    \"gateway\": \"momo\",\n    \"amount\": 450000,\n    \"currency\": \"VND\",\n    \"metadata\": {\"purpose\": \"manual retry\"}\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"paymentId\", response.payment_id);",
                  "pm.collectionVariables.set(\"paymentGateway\", response.gateway);"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Initiate Payment - Error 404 Order Not Found",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments/initiate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments",
                "initiate"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"order_id\": 999999,\n    \"gateway\": \"momo\",\n    \"amount\": 100,\n    \"currency\": \"VND\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Initiate Payment - Error 403 Forbidden (Customer)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments/initiate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments",
                "initiate"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"order_id\": {{orderId}},\n    \"gateway\": \"momo\",\n    \"amount\": 450000\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Payment Callback - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments/{{paymentGateway}}/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments",
                "{{paymentGateway}}",
                "callback"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"order_id\": {{orderId}},\n    \"payment_id\": {{paymentId}},\n    \"transaction_id\": \"SIM-{{$timestamp}}\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(pm.response.code === 200 || pm.response.code === 404, \"Callback processed or payment missing\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Payment Callback - Error 400 Invalid Payload",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments/momo/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments",
                "momo",
                "callback"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"payment_id\": {{paymentId}}\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Payment Callback - Error 404 Payment Not Found",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments/momo/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments",
                "momo",
                "callback"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"order_id\": {{orderId}},\n    \"payment_id\": 999999,\n    \"transaction_id\": \"FAIL-{{$timestamp}}\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Payments - Success (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Payments - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "List Payments - Error 403 Forbidden (Customer)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payments"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Inventory",
      "item": [
        {
          "name": "Create Supplier - Success (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/inventory/suppliers",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "suppliers"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"Supplier {{$randomInt}}\",\n    \"contact_name\": \"Supplier Rep\",\n    \"contact_phone\": \"0911001100\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"supplierId\", response.id);"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Supplier - Error 422 Missing Name",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/inventory/suppliers",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "suppliers"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"contact_name\": \"No Name\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Supplier - Error 403 Forbidden (Customer)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/inventory/suppliers",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "suppliers"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"name\": \"Forbidden Supplier\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Suppliers - Success (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/inventory/suppliers",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "suppliers"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Suppliers - Error 403 Forbidden (Customer)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/inventory/suppliers",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "suppliers"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Suppliers - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/inventory/suppliers",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "suppliers"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Create Purchase Order - Success (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/inventory/stock-entries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "stock-entries"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"supplier_id\": {{supplierId}},\n    \"items\": [\n        {\n            \"product_id\": {{productId}},\n            \"quantity\": 5,\n            \"unit_cost\": 300000\n        }\n    ],\n    \"notes\": \"Restock product for testing\"\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set(\"purchaseOrderId\", response.id);"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Purchase Order - Error 400 No Items",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/inventory/stock-entries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "stock-entries"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"supplier_id\": {{supplierId}},\n    \"items\": []\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Purchase Order - Error 404 Supplier Not Found",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/inventory/stock-entries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "stock-entries"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"supplier_id\": 999999,\n    \"items\": [\n        {\n            \"product_id\": {{productId}},\n            \"quantity\": 1,\n            \"unit_cost\": 1000\n        }\n    ]\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Create Purchase Order - Error 404 Product Not Found",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/inventory/stock-entries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "stock-entries"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "\n{\n    \"supplier_id\": {{supplierId}},\n    \"items\": [\n        {\n            \"product_id\": 999999,\n            \"quantity\": 1,\n            \"unit_cost\": 1000\n        }\n    ]\n}\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Purchase Orders - Success (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/inventory/stock-entries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "stock-entries"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{adminAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "List Purchase Orders - Error 403 Forbidden (Customer)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/inventory/stock-entries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "stock-entries"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Purchase Orders - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/inventory/stock-entries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "inventory",
                "stock-entries"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        }
      ]
    },
    {
      "name": "Rewards",
      "item": [
        {
          "name": "Get Reward Dashboard - Success",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/rewards/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "rewards",
                "me"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Reward Dashboard - Error 401 Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/rewards/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "rewards",
                "me"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Get Reward Dashboard - Error 401 Invalid Token",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{invalidToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rewards/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "rewards",
                "me"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Redeem Voucher - Success",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/rewards/redeem",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "rewards",
                "redeem"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(pm.response.code === 201 || pm.response.code === 400, \"Redeem when enough points or detect insufficient\");",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set(\"voucherCode\", response.voucher.code);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Redeem Voucher - Error 400 Not Enough Points",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/rewards/redeem",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "rewards",
                "redeem"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ]
              }
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{secondCustomerAccessToken}}",
                "type": "string"
              }
            ]
          }
        },
        {
          "name": "Redeem Voucher - Error 401 Missing Token",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/rewards/redeem",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "rewards",
                "redeem"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.request.headers.remove(\"Authorization\");"
                ]
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "event": [],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://127.0.0.1:8000/api"
    },
    {
      "key": "customerEmail",
      "value": ""
    },
    {
      "key": "customerPassword",
      "value": "stringstrong!"
    },
    {
      "key": "customerId",
      "value": ""
    },
    {
      "key": "secondCustomerEmail",
      "value": ""
    },
    {
      "key": "secondCustomerPassword",
      "value": "stringstrong!"
    },
    {
      "key": "secondCustomerId",
      "value": ""
    },
    {
      "key": "accessToken",
      "value": ""
    },
    {
      "key": "refreshToken",
      "value": ""
    },
    {
      "key": "secondCustomerAccessToken",
      "value": ""
    },
    {
      "key": "adminEmail",
      "value": "admin@example.com"
    },
    {
      "key": "adminPassword",
      "value": "AdminPass123!"
    },
    {
      "key": "adminAccessToken",
      "value": ""
    },
    {
      "key": "rootEmail",
      "value": "root@example.com"
    },
    {
      "key": "rootPassword",
      "value": "RootPass123!"
    },
    {
      "key": "rootAccessToken",
      "value": ""
    },
    {
      "key": "categoryId",
      "value": ""
    },
    {
      "key": "tagId",
      "value": ""
    },
    {
      "key": "productId",
      "value": ""
    },
    {
      "key": "productToDeleteId",
      "value": ""
    },
    {
      "key": "supplierId",
      "value": ""
    },
    {
      "key": "purchaseOrderId",
      "value": ""
    },
    {
      "key": "cartItemId",
      "value": ""
    },
    {
      "key": "orderId",
      "value": ""
    },
    {
      "key": "orderIdToCancel",
      "value": ""
    },
    {
      "key": "paymentId",
      "value": ""
    },
    {
      "key": "paymentGateway",
      "value": "momo"
    },
    {
      "key": "voucherCode",
      "value": ""
    },
    {
      "key": "invalidToken",
      "value": "invalid-token"
    },
    {
      "key": "createdRoleId",
      "value": ""
    },
    {
      "key": "duplicateRoleId",
      "value": ""
    }
  ]
}
